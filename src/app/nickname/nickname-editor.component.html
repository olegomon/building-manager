<div class="card">

  <div class="card-header">
    <h4>Nickname Editor</h4>
  </div>

  <div class="card-body">
    <form [formGroup]="editorForm" (submit)="onSubmit()">

      <div class="d-flex justify-content-end">
        <button type="button" (click)="addNickname()" class="btn btn-secondary btn-sm" role="button">Add Nickname</button>
      </div>

      <div formArrayName="nicknames">
        <div class="form-group" *ngFor="let control of nicknames.controls; let index = index">

          <label [attr.for]="'nicknameInput' + index">Nickname {{index}}</label>

          <div class="input-group">
            <input [id]="'nicknameInput' + index"
                   [formControlName]="index"
                   class="form-control"
                   [class.is-invalid]="showError(control)"
                   type="text"
                   placeholder="Nickname"
                   autocomplete="off">

            <div class="input-group-append">
              <button (click)="deleteNickname(index)" [disabled]="isPending(control)" class="btn btn-outline-secondary" type="button" tabindex="-1">
                <fa-icon [icon]="deleteIcon"></fa-icon>
              </button>
            </div>

            <div class="invalid-feedback" *ngIf="showError(control)">
              <span *ngIf="control.errors?.required">Nickname is required</span>
              <span *ngIf="control.errors?.format">{{control.errors.format.message}}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-end">
        <button [disabled]="!editorForm.valid" type="submit" class="btn btn-primary" role="button">Save</button>
      </div>

    </form>
  </div>
</div>

